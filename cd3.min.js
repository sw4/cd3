function cd3(a){function I(a,c){var e={};for(prop in a)({}).hasOwnProperty.call(a,prop)&&(e[prop]=a[prop],{}.hasOwnProperty.call(c,prop)&&(e[prop]="object"===typeof a[prop]&&"object"===typeof c[prop]?I(a[prop],c[prop]):c[prop]));return e}function J(b){var c={element:{},resampling:!0,stacked:!1,fit:!0,type:null,drawHeight:0,drawWidth:0,margin:{top:40,right:40,bottom:40,left:40},animation:{easing:"linear",duration:200},title:!1,legend:!0,xAxis:{scale:"linear",format:null,values:null,ticks:{rotate:0,
x:null,y:null}},yAxis:{scale:"linear",format:null,values:null,ticks:{rotate:0,x:null,y:null}}};c.data=b.data;c.series=b.series;"pie"!==b.type&&(c.xAxis.domain=b.xAxis.domain,c.xAxis.range=b.xAxis.range,c.yAxis.domain=b.yAxis.domain,c.yAxis.range=b.yAxis.range);b.margin&&(b.margin=K(b.margin));a=I(c,b);a.data=r(a.data);a.series=r(a.series);a.xAxis.domain&&(a.xAxis.domain=r(a.xAxis.domain));a.xAxis.range&&(a.xAxis.range=r(a.xAxis.range));a.yAxis.domain&&(a.yAxis.domain=r(a.yAxis.domain));a.yAxis.range&&
(a.yAxis.range=r(a.yAxis.range));O()}function K(a){a&&"object"!==typeof a&&(a={top:a,right:a,bottom:a,left:a});return a}function F(b,c){a.width=parseInt(n.style("width"));a.height=parseInt(n.style("height"));a.drawHeight=a.height-a.margin.top-a.margin.bottom;a.drawWidth=a.width-a.margin.left-a.margin.right;c&&"width"!=c||(z&&z.attr("x",a.width/2-a.margin.left/2),p.ticks(Math.max(a.width/130,2)),b&&v("x",b));c&&"height"!=c||("pie"!==a.type&&w.attr("transform","translate(0,"+(a.height-a.margin.bottom-
a.margin.top)+")"),q.ticks(Math.max(a.height/20,2)),b&&v("y",b));x.attr("transform","translate("+a.margin.left+","+a.margin.top+")")}function A(a){for(var c=0,e=0;e<a.length;e++)c=a.charCodeAt(e)+((c<<5)-c);a="#";for(e=0;3>e;e++)a+=("00"+(c>>8*e&255).toString(16)).substr(-2);return a}function r(a){var c=[],e;for(e in a)c.push(a[e]);return c}function P(a,c,e){e=e||"asc";a=a.slice();a.sort(function(a,b){return"asc"==e?a[c]-b[c]:b[c]-a[c]});return a}function L(){"time"==a.xAxis.type?a.data=sort(a.data,
a.xAxis.values):"time"==a.yAxis.type&&(a.data=sort(a.data,a.yAxis.values));return a.data}function M(b){b&&(b=b.toLowerCase());ticks="x"==b?w.selectAll(".tick text"):B.selectAll(".tick text");0<a[b+"Axis"].ticks.rotate&&ticks.attr("transform",function(c){return"rotate("+a[b+"Axis"].ticks.rotate+")"});a[b+"Axis"].ticks.x&&ticks.attr("x",a[b+"Axis"].ticks.x);a[b+"Axis"].ticks.y&&ticks.attr("y",a[b+"Axis"].ticks.y);"x"==b&&p.ticks(Math.max(a.width/130,2));"y"==b&&q.ticks(Math.max(a.height/20,2))}function k(a){a&&
(a=a.toLowerCase());a&&"x"!=a||(w.call(p),M("x"));a&&"y"!=a||(B.call(q),M("y"))}function s(b,c){var e="x"==b?g:h;b=b.toLowerCase();c||(c=a[b+"Axis"].scale);if("string"===typeof c)switch(c){case "time":e=d3.time.scale();break;default:case "linear":e=d3.scale.linear();break;case "ordinal":e=d3.scale.ordinal()}a[b+"Axis"].scale=c;"x"==b?g=e:h=e;v(b,a[b+"Axis"].range);y(b,a[b+"Axis"].domain);"x"==b?p.scale(g):q.scale(h);k(b)}function y(b,c){var e="x"==b?g:h,d;b=b.toLowerCase();c&&(a[b+"Axis"].domain=
c);d=(c=c||a[b+"Axis"].domain)||"ordinal"!=a[b+"Axis"].scale?c?c:d3.extent(a.data,function(e){return e[a[b+"Axis"].values]}):a.data.map(function(e){return e[a[b+"Axis"].values]});e.domain(d)}function v(b,c){var e="x"==b?g:h;b=b.toLowerCase();c&&"auto"!=c||"ordinal"!=a[b+"Axis"].scale?(a[b+"Axis"].range=c&&"auto"!=c?c:"x"===b?[0,a.width-a.margin.left-a.margin.right]:[a.height-a.margin.top-a.margin.bottom,0],e.range(a[b+"Axis"].range)):(a[b+"Axis"].range="x"===b?[0,a.width-a.margin.left-a.margin.right]:
[a.height-a.margin.top-a.margin.bottom,0],"bar"==a.type||"column"==a.type?e.rangeBands(a[b+"Axis"].range):e.rangePoints(a[b+"Axis"].range))}function C(b,c){b=b.toLowerCase();c=c||a[b+"Axis"].format;a[b+"Axis"].format=c;"x"==b?p.tickFormat(c):q.tickFormat(c);k(b)}function G(b,c){arguments.length&&"function"==typeof c&&(a.series[b].onAdd=c);return d}function N(){var b=[];a.series.forEach(function(a){b.push(a.values)});return d3.layout.stack()(b.map(function(b){return a.data.map(function(e){return{x:e[a.xAxis.values],
y:+e[b]}})}))}function Q(b){if("pie"===a.type){var c=a.data.filter(function(e){return 0<e[a.series[b].values]}),c=P(c,a.series[b].values,"desc");t.select("div .series"+b).selectAll("div").remove();c.forEach(function(e){t.select("div .series"+b).append("div").attr("class","pie category_"+e[a.series[b].categories]+" value_"+e[a.series[b].values]+" "+a.series[b].cssClass).style("color",A("category_"+e[a.series[b].categories]+"value_"+e[a.series[b].values])).html(e[a.series[b].categories]+": "+e[a.series[b].values])})}}
function H(b){var c=l.append("g").attr("class","series"+b);a.series[b].color=a.series[b].color||A("series"+b+a.series[b].values);if("line"===a.type||"area"===a.type){var e=c.append("path").attr("class","series"+b+" line "+a.series[b].values+" "+a.series[b].cssClass).attr("stroke",a.series[b].color);m(e,b,"onAdd");"area"==a.type&&(c=c.append("path").attr("class","series"+b+" area "+a.series[b].values+" "+a.series[b].cssClass).attr("fill",a.series[b].color),m(c,b,"onAdd"))}else"pie"===a.type&&(a.series[b].donut=
a.series[b].donut||0);t&&t.append("div").attr("class","series"+b+" "+a.type+" "+a.series[b].values+" "+a.series[b].cssClass).style("color",a.series[b].color).html(b.title||"series"+b);u(b)}function u(b){var c=[];"number"==typeof b?c.push(b):a.series.forEach(function(a,b){c.push(b)});c.forEach(function(b){switch(a.type){case "pie":var c=a.data.filter(function(c){return 0<c[a.series[b].values]}),d=Math.min(a.width-a.margin.left-a.margin.right,a.height-a.margin.top-a.margin.bottom)/2;l.select(".series"+
b).attr("transform","translate("+(a.width-a.margin.left-a.margin.right)/2+","+(a.height-a.margin.top-a.margin.bottom)/2+")");var d=d3.svg.arc().outerRadius(d).innerRadius(a.series[b].donut/100*d),k=d3.layout.pie().value(function(c){return c[a.series[b].values]}),n=l.select(".series"+b).selectAll("path");n.data(k(c)).attr("fill",function(c,d){return A("category_"+c.data[a.series[b].categories]+"value_"+c.data[a.series[b].values])}).transition().call(function(a){m(a,b,"onChange")}).attr("d",d);n.data(k(c)).enter().append("path").attr("class",
function(c,d){return"pie category_"+c.data[a.series[b].categories]+" value_"+c.data[a.series[b].values]+" "+a.series[b].cssClass}).attr("fill",function(c,d){return A("category_"+c.data[a.series[b].categories]+"value_"+c.data[a.series[b].values])}).transition().call(function(a){m(a,b,"onChange")}).attr("d",d);n.data(k(c)).exit().transition().call(function(a){m(a,b,"onChange")}).remove();Q(b);break;case "area":case "line":c=d3.svg.line().x(function(b,c){return g(b[a.xAxis.values])}).y(function(c,d){return h(c[a.series[b].values])});
"area"==a.type&&(d=d3.svg.area().x(function(b){return g(b[a.xAxis.values])}).y0(a.height-a.margin.top-a.margin.bottom).y1(function(c){return h(c[a.series[b].values])}),l.select(".series"+b).select("path.area").data([a.data]).transition().call(function(a){m(a,b,"onChange")}).attr("d",d));l.select(".series"+b).select("path.line").data([a.data]).transition().call(function(a){m(a,b,"onChange")}).attr("d",c);break;case "scatter":c=l.select(".series"+b).selectAll("circle");c.data(a.data).transition().call(function(a){m(a,
b,"onChange")}).attr("cx",function(b){return g(b[a.xAxis.values])}).attr("cy",function(c){return h(c[a.series[b].values])}).attr("r",function(c,d){return"function"==typeof a.series[b].radius?a.series[b].radius(c,d):"number"==typeof a.series[b].radius?a.series[b].radius:2.5});c.data(a.data).enter().append("circle").attr("class","series"+b+" line "+a.series[b].values+" "+a.series[b].cssClass).attr("fill",a.series[b].color).attr("stroke",a.series[b].color).transition().call(function(a){m(a,b,"onAdd")}).attr("cx",
function(b){return g(b[a.xAxis.values])}).attr("cy",function(c){return h(c[a.series[b].values])}).attr("r",function(c,d){return"function"==typeof a.series[b].radius?a.series[b].radius(c,d):"number"==typeof a.series[b].radius?a.series[b].radius:2.5});c.data(a.data).exit().transition().call(function(a){m(a,b,"onRemove")}).remove();break;case "stack":var f=0,f="ordinal"==a.xAxis.type?g.rangeBand():(a.width-a.margin.left-a.margin.right)/a.data.length,f=2>f?2:f,d=N()[b],c=l.select(".series"+b).selectAll("rect");
c.data(d).enter().append("svg:rect").attr("x",function(a){return g(a.x)}).attr("y",function(b){var c=a.height-a.margin.top-a.margin.bottom-h(b.y);b=a.height-a.margin.top-a.margin.bottom-h(b.y0);return a.height-a.margin.top-a.margin.bottom-c-b}).attr("height",function(b){return a.height-a.margin.top-a.margin.bottom-h(b.y)}).attr("fill",a.series[b].color).attr("width",f);break;case "bar":case "column":var d=a.stacked?N()[b]:a.data,p=function(c,d){var g=a.drawHeight-h(c.y),k=a.drawHeight-h(c.y0);return"column"==
a.type&&a.stacked?a.drawHeight-g-k:"column"==a.type?h(c[a.series[b].values]):a.stacked?f*d:d*f*a.series.length+f*b+1},q=function(c,d){return"column"==a.type&&a.stacked?g(c.x):"column"==a.type?d*f*a.series.length+f*b+1:a.stacked?g(c.y0):0},r=function(c){return"column"==a.type&&a.stacked?a.drawHeight-h(c.y):"column"==a.type?a.drawHeight-h(c[a.series[b].values]):f-2},s=function(c){return"column"==a.type&&a.stacked?f-2:"column"==a.type?f-2:a.stacked?g(c.y):g(c[a.series[b].values])},f=0,f="column"==a.type?
"ordinal"==a.xAxis.type?g.rangeBand():(a.width-a.margin.left-a.margin.right)/a.data.length:"ordinal"==a.yAxis.type?h.rangeBand():(a.height-a.margin.top-a.margin.bottom)/a.data.length,f=a.stacked?f:f/a.series.length,f=2>f?2:f,c=l.select(".series"+b).selectAll("rect");c.data(d).transition().call(function(a){m(a,b,"onChange")}).attr("y",function(a,b){return p(a,b)}).attr("x",function(a,b){return q(a,b)}).attr("height",function(a){return r(a)}).attr("width",function(a){return s(a)});c.data(d).enter().append("rect").attr("class",
"series"+b+" line "+a.series[b].values+" "+a.series[b].cssClass).attr("fill",a.series[b].color).transition().call(function(a){m(a,b,"onAdd")}).attr("y",function(a,b){return p(a,b)}).attr("x",function(a,b){return q(a,b)}).attr("height",function(a){return r(a)}).attr("width",function(a){return s(a)})}})}function m(b,c,d){if(a.series[c][d])a.series[c][d](b,d);else b.duration&&b.duration(a.animation.duration).ease(a.animation.easing)}function O(){D=D||n.append("svg");x=x||D.append("g").attr("class","chart");
z=z||a.title?D.append("text").text(a.title).attr("class","title").attr("y",a.margin.top-a.margin.top/2):null;t=t||a.legend?n.append("div").attr("class","legend"):null;l=l||x.append("g").attr("class","series");"pie"!==a.type&&(E=E||x.append("g").attr("class","axes"),w=w||E.append("g").attr("class","x axis"),B=B||E.append("g").attr("class","y axis"));L();F(!1);"pie"!==a.type&&(p.orient("bottom"),q.orient("left"),C("x"),C("y"),s("x"),s("y"));a.series.forEach(function(a,c){H(c)})}var d={},n=null,D=null,
x=null,l=null,z=null,t=null,E=null,w=null,B=null,p=d3.svg.axis(),q=d3.svg.axis(),g=d3.scale.linear(),h=d3.scale.linear();a&&(n="string"==typeof a.element?d3.select(a.element):n,n.attr("class","cd3").html(""),J(a));d.config=function(b){if(!arguments.length)return a;b.element=a.element;J(b);return d};d.margin=function(b){if(!arguments.length)return a.margin;a.margin=K(b);F("auto");k();return d};d.data=function(b){if(!arguments.length)return a.data;0<b.length&&(a.data=L(),"pie"!==a.type&&(y("x"),y("y"),
k("x"),k("y")),u());return d};d.d3xAxis=function(){return p};d.d3yAxis=function(){return q};d.d3xScale=function(a){return arguments.length?(s("x",a),d):g};d.d3yScale=function(a){return arguments.length?(s("y",a),d):h};d.xScale=function(b){return arguments.length?(s("x",b),d):a.xAxis.scale};d.yScale=function(b){return arguments.length?(s("y",b),d):a.yAxis.scale};d.xDomain=function(b){return arguments.length?(y("x",b),k("x"),u(),d):a.xAxis.domain};d.yDomain=function(b){return arguments.length?(y("y",
b),k("y"),u(),d):a.yAxis.domain};d.xRange=function(b){return arguments.length?(v("x",b),k("x"),d):a.xAxis.range};d.yRange=function(b){return arguments.length?(v("y",b),k("y"),d):a.yAxis.range};d.seriesValues=function(b,c){var e="number"==typeof b?!0:!1;if(e&&!c)return a.series[b].values;e&&c&&(a.series[b].values=c,u(b));return d};d.addSeries=function(b){arguments.length&&(a.series.push(b),H(a.series.length-1));return d};d.hideSeries=function(b){if(arguments.length&&"number"==typeof b&&a.series[b]){var c=
null;switch(a.type){case "line":c=l.select(".series"+b).selectAll("path");break;case "scatter":c=l.select(".series"+b).selectAll("circle");break;case "bar":case "column":c=l.select(".series"+b).selectAll("rect")}c.transition().call(function(a){m(a,series,"onRemove")}).remove()}return d};d.showSeries=function(b){arguments.length&&"number"==typeof b&&a.series[b]&&H(b);return d};d.resize=function(){F("auto");"pie"!==a.type&&(k("x"),k("y"));a.series.forEach(function(a,c){u(c)})};d.onAdd=G;d.onChange=
G;d.onAdd=G;d.xFormat=function(b){return arguments.length?(C("x",b),d):a.xAxis.format};d.yFormat=function(b){return arguments.length?(C("y",b),d):a.yAxis.format};return d};