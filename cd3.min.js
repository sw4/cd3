function cd3(a){function E(a,c){var e={};for(prop in a)({}).hasOwnProperty.call(a,prop)&&(e[prop]=a[prop],{}.hasOwnProperty.call(c,prop)&&(e[prop]="object"===typeof a[prop]&&"object"===typeof c[prop]?E(a[prop],c[prop]):c[prop]));return e}function F(b){var c={element:{},resampling:!0,fit:!0,type:null,margin:{top:40,right:40,bottom:40,left:40},animation:{easing:"linear",duration:200},autoResize:!0,title:!1,legend:!0,xAxis:{scale:"linear",format:null,values:null,ticks:{xOffset:0,yOffset:0,rotate:0}},
yAxis:{scale:"linear",format:null,values:null,ticks:{xOffset:0,yOffset:0,rotate:0}}};c.data=b.data;c.series=b.series;c.xAxis.domain=b.xAxis.domain;c.xAxis.range=b.xAxis.range;c.yAxis.domain=b.yAxis.domain;c.yAxis.range=b.yAxis.range;b.margin&&(b.margin=G(b.margin));a=E(c,b);a.data=n(a.data);a.series=n(a.series);a.xAxis.domain&&(a.xAxis.domain=n(a.xAxis.domain));a.xAxis.range&&(a.xAxis.range=n(a.xAxis.range));a.yAxis.domain&&(a.yAxis.domain=n(a.yAxis.domain));a.yAxis.range&&(a.yAxis.range=n(a.yAxis.range));
L()}function G(a){a&&"object"!==typeof a&&(a={top:a,right:a,bottom:a,left:a});return a}function C(b,c){a.width=parseInt(l.style("width"));a.height=parseInt(l.style("height"));c&&"width"!=c||(y&&y.attr("x",a.width/2-a.margin.left/2),t.ticks(Math.max(a.width/130,2)),b&&u("x",b));c&&"height"!=c||(z.attr("transform","translate(0,"+(a.height-a.margin.bottom-a.margin.top)+")"),v.ticks(Math.max(a.height/20,2)),b&&u("y",b));w.attr("transform","translate("+a.margin.left+","+a.margin.top+")")}function n(a){var c=
[],e;for(e in a)c.push(a[e]);return c}function H(){"time"==a.xAxis.type?a.data=sort(a.data,a.xAxis.values):"time"==a.yAxis.type&&(a.data=sort(a.data,a.yAxis.values));return a.data}function h(a){a&&(a=a.toLowerCase());a&&"x"!=a||z.call(t);a&&"y"!=a||D.call(v)}function p(b,c){var e="x"==b?f:g;b=b.toLowerCase();c||(c=a[b+"Axis"].scale);if("string"===typeof c)switch(c){case "time":e(d3.time.scale());break;default:case "linear":e(d3.scale.linear());break;case "ordinal":e(d3.scale.ordinal())}a[b+"Axis"].scale=
c;u(b,a[b+"Axis"].range);x(b,a[b+"Axis"].domain);"x"==b?t.scale(f):v.scale(g);h(b)}function x(b,c){var e="x"==b?f:g,d;b=b.toLowerCase();c&&(a[b+"Axis"].domain=c);d=(c=c||a[b+"Axis"].domain)||"ordinal"!=a[b+"Axis"].scale?c?c:d3.extent(a.data,function(c){return c[a[b+"Axis"].values]}):a.data.map(function(c){return c[a[b+"Axis"].values]});e.domain(d)}function u(b,c){var e="x"==b?f:g;b=b.toLowerCase();c&&"auto"!=c||"ordinal"!=a[b+"Axis"].scale?(a[b+"Axis"].range=c&&"auto"!=c?c:"x"===b?[0,a.width-a.margin.left-
a.margin.right]:[a.height-a.margin.top-a.margin.bottom,0],e.range(a[b+"Axis"].range)):(a[b+"Axis"].range="x"===b?[0,a.width-a.margin.left-a.margin.right]:[a.height-a.margin.top-a.margin.bottom,0],e.rangePoints(a[b+"Axis"].range))}function I(b){var c=q.append("g").attr("class","series"+b),e=a.series[b],d;if(!(d=a.series[b].color)){var k="series"+b+a.series[b].values;d=0;for(var k=k+Math.floor(111111*Math.random()),m=0;m<k.length;m++)d=k.charCodeAt(m)+((d<<5)-d);k="#";for(m=0;3>m;m++)k+=("00"+(d>>8*
m&255).toString(16)).substr(-2);d=k}e.color=d;"line"===a.type&&(c=c.append("path").attr("class","series"+b+" line "+a.series[b].values+" "+a.series[b].cssClass).attr("stroke",a.series[b].color),r(c,b,"onAdd"));s(b)}function s(b){var c=[];"number"==typeof b?c.push(b):a.series.forEach(function(a,b){c.push(b)});c.forEach(function(b){switch(a.type){case "line":var c=d3.svg.line().x(function(b,c){return f(b[a.xAxis.values])}).y(function(c,d){return g(c[a.series[b].values])});q.select(".series"+b).select("path").data([a.data]).transition().call(function(a){r(a,
b,"onChange")}).attr("d",c);break;case "scatter":c=q.select(".series"+b).selectAll("circle");c.data(a.data).transition().call(function(a){r(a,b,"onChange")}).attr("cx",function(b){return f(b[a.xAxis.values])}).attr("cy",function(c){return g(c[a.series[b].values])});c.data(a.data).enter().append("circle").attr("class","series"+b+" line "+a.series[b].values+" "+a.series[b].cssClass).attr("fill",a.series[b].color).attr("stroke",a.series[b].color).transition().call(function(a){r(a,b,"onAdd")}).attr("cx",
function(b){return f(b[a.xAxis.values])}).attr("cy",function(c){return g(c[a.series[b].values])}).attr("r",2.5);c.data(a.data).exit().transition().call(function(a){r(a,b,"onRemove")}).remove();break;case "bar":case "column":var d=0,d="column"==a.type?"ordinal"==a.xAxis.type?f.rangeBand():(a.width-a.margin.left-a.margin.right)/a.data.length:"ordinal"==a.yAxis.type?g.rangeBand():(a.height-a.margin.top-a.margin.bottom)/a.data.length;console.log(d);d=2>d?2:d;c=q.select(".series"+b).selectAll("rect");
c.data(a.data).transition().call(function(a){r(a,b,"onChange")}).attr("y",function(c,f){return"column"==a.type?g(c[a.series[b].values]):f*d+1}).attr("x",function(b,c){return"column"==a.type?c*d+1:0}).attr("height",function(c){return"column"==a.type?a.height-a.margin.top-a.margin.bottom-g(c[a.series[b].values]):d-2}).attr("width",function(c){return"column"==a.type?d-2:a.width-a.margin.left-a.margin.right-f(c[a.series[b].values])});c.data(a.data).enter().append("rect").attr("class","series"+b+" line "+
a.series[b].values+" "+a.series[b].cssClass).attr("fill",a.series[b].color).attr("y",function(c,f){return"column"==a.type?g(c[a.series[b].values]):f*d+1}).attr("x",function(b,c){return"column"==a.type?c*d+1:0}).attr("height",function(c){return"column"==a.type?a.height-a.margin.top-a.margin.bottom-g(c[a.series[b].values]):d-2}).attr("width",function(c){return"column"==a.type?d-2:a.width-a.margin.left-a.margin.right-f(c[a.series[b].values])});c.data(a.data).exit().remove()}})}function r(b,c,d){if(a.series[c][d])a.series[c][d](b,
d);else b.duration(a.animation.duration).ease(a.animation.easing)}function J(){C("auto");h("x");h("y");a.series.forEach(function(a,c){s(c)})}function L(){A=A||l.append("svg");w=w||A.append("g").attr("class","chart");y=y||a.title?A.append("text").text(a.title).attr("class","title").attr("y",a.margin.top-a.margin.top/2):null;K=K||a.legend?l.append("div").attr("class","legend"):null;q=q||w.append("g").attr("class","series");B=B||w.append("g").attr("class","axes");z=z||B.append("g").attr("class","x axis");
D=D||B.append("g").attr("class","y axis");H();C(!1);t.orient("bottom");v.orient("left");p("x");p("y");a.series.forEach(function(a,c){I(c)});a.fit&&d3.select(window).on("resize",J)}var d={},l=null,A=null,w=null,q=null,y=null,K=null,B=null,z=null,D=null,t=d3.svg.axis(),v=d3.svg.axis(),f=d3.scale.linear(),g=d3.scale.linear();a&&(l="string"==typeof a.element?d3.select(a.element):l,l.attr("class","cd3").html(""),F(a));d.config=function(b){if(!arguments.length)return a;b.element=a.element;F(b);return d};
d.margin=function(b){if(!arguments.length)return a.margin;a.margin=G(b);C("auto");h();return d};d.data=function(b){if(!arguments.length)return a.data;a.data=H(data);x("x");x("y");h("x");h("y");s();return d};d.d3xAxis=function(){return t};d.d3yAxis=function(){return v};d.d3xScale=function(a){return arguments.length?(p("x",a),d):f};d.d3yScale=function(a){return arguments.length?(p("y",a),d):g};d.xScale=function(b){return arguments.length?(p("x",b),d):a.xAxis.scale};d.yScale=function(b){return arguments.length?
(p("y",b),d):a.yAxis.scale};d.xDomain=function(b){return arguments.length?(x("x",b),h("x"),s(),d):a.xAxis.domain};d.yDomain=function(b){return arguments.length?(x("y",b),h("y"),s(),d):a.yAxis.domain};d.xRange=function(b){return arguments.length?(u("x",b),h("x"),d):a.xAxis.range};d.yRange=function(b){return arguments.length?(u("y",b),h("y"),d):a.yAxis.range};d.seriesValues=function(b,c){var e="number"==typeof b?!0:!1;if(e&&!c)return a.series[b].values;e&&c&&(a.series[b].values=c,s(b));return d};d.addSeries=
function(b){arguments.length&&(a.series.push(b),I(a.series.length-1));return d};d.resize=J;return d};